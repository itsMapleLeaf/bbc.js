'use strict';

const test = require('ava');
const bbc = require('./index');

test('tokenizing', t => {
  t.deepEqual(bbc.tokenize(`[b]hello[/b] [i]world[/i] foobar`), [{ type: 'start-tag', text: '[b]', tag: 'b', param: null }, { type: 'text', text: 'hello' }, { type: 'end-tag', text: '[/b]', tag: 'b' }, { type: 'text', text: ' ' }, { type: 'start-tag', text: '[i]', tag: 'i', param: null }, { type: 'text', text: 'world' }, { type: 'end-tag', text: '[/i]', tag: 'i' }, { type: 'text', text: ' foobar' }]);
});

test('parsing a single text node', t => {
  t.deepEqual(bbc.parseText('foo bar'), [{ type: 'text', text: 'foo bar' }]);
});

test('parsing unmatched end tags as text', t => {
  t.deepEqual(bbc.parseText('[/foo][/bar]'), [{ type: 'text', text: '[/foo]' }, { type: 'text', text: '[/bar]' }]);
  t.deepEqual(bbc.parseText('[/foo] test [/bar]'), [{ type: 'text', text: '[/foo]' }, { type: 'text', text: ' test ' }, { type: 'text', text: '[/bar]' }]);
});

test('parsing flat tag pairs', t => {
  t.deepEqual(bbc.parseText('[b]foo[/b][color=red]bar[/color]'), [{
    type: 'tag-pair',
    tag: 'b',
    param: null,
    children: [{ type: 'text', text: 'foo' }]
  }, {
    type: 'tag-pair',
    tag: 'color',
    param: 'red',
    children: [{ type: 'text', text: 'bar' }]
  }]);
});

test('parsing nesty tag pair', t => {
  t.pass('todo');
  // t.deepEqual(bbc.parse(bbc.tokenize('foo bar')), [
  //   {
  //     type: 'tag-pair',
  //     tag: 'b',
  //     param: null,
  //     children: [{type: 'text', text: 'test'}],
  //   },
  // ])
});
//# sourceMappingURL=node_modules/.cache/ava/cdce7e31222780f539fc65a2d5cda033.js.map